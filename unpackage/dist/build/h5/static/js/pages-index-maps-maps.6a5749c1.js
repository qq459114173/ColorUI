(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-maps-maps"],{"01eb":function(t,e,i){"use strict";i.r(e);var a=i("7765"),o=i("66de");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("5358");var s,r=i("f0c5"),c=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"b2c13f82",null,!1,a["a"],s);e["default"]=c.exports},"0de9":function(t,e,i){"use strict";function a(t){var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1)}function o(){return"string"===typeof __channelId__&&__channelId__}function n(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];console[t].apply(console,i)}function s(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.shift();if(o())return e.push(e.pop().replace("at ","uni-app:///")),console[n].apply(console,e);var s=e.map((function(t){var e=Object.prototype.toString.call(t).toLowerCase();if("[object object]"===e||"[object array]"===e)try{t="---BEGIN:JSON---"+JSON.stringify(t)+"---END:JSON---"}catch(o){t="[object object]"}else if(null===t)t="---NULL---";else if(void 0===t)t="---UNDEFINED---";else{var i=a(t).toUpperCase();t="NUMBER"===i||"BOOLEAN"===i?"---BEGIN:"+i+"---"+t+"---END:"+i+"---":String(t)}return t})),r="";if(s.length>1){var c=s.pop();r=s.join("---COMMA---"),0===c.indexOf(" at ")?r+=c:r+="---COMMA---"+c}else r=s[0];console[n](r)}i.r(e),i.d(e,"log",(function(){return n})),i.d(e,"default",(function(){return s}))},"47d1":function(t,e,i){"use strict";(function(t){i("c975"),i("a9e3"),i("d3b7"),i("ac1f"),i("25f0"),i("5319"),i("1276"),i("498a"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("560f"),o={data:function(){return{inputShowed:!1,inputVal:"",amapPlugin:null,key:"6799b5f6f88d3d9fb52ac244855a8759",lat:22.63137,lng:114.010857,covers:[],address:[],scrollH:256}},onLoad:function(t){var e=this;this.amapPlugin=new a.AMapWX({key:this.key}),setTimeout((function(){var i=uni.getSystemInfoSync().windowHeight;e.scrollH=i-44-uni.upx2px(600),e.getLocation((function(){e.getPoiAround(t.key||"加油站")}))}),300)},methods:{trim:function(t){return t?t.toString().replace(/(^\s*)|(\s*$)/g,""):t},showInput:function(){this.inputShowed=!0},hideInput:function(){this.inputVal="",this.inputShowed=!1,uni.hideKeyboard()},clearInput:function(){this.inputVal=""},inputTyping:function(t){this.inputVal=t.detail.value},getLocation:function(t){var e=this;this.amapPlugin.getRegeo({success:function(i){e.lng=i[0].longitude,e.lat=i[0].latitude,t()},fail:function(e){t()}})},getPoiAround:function(t){var e=this;uni.showLoading({title:"加载中..."});var i=this;setTimeout((function(){e.amapPlugin.getPoiAround({querykeywords:t,location:"",success:function(t){for(var a=[],o=[],n=0;n<t.markers.length;n++){a.push({id:n,latitude:t.markers[n].latitude,longitude:t.markers[n].longitude,title:t.markers[n].name});var s=i.trim(t.poisData[n].tel);~s.indexOf(";")&&(s=s.split(";")[0]),o.push({id:n,latitude:t.markers[n].latitude,longitude:t.markers[n].longitude,title:t.markers[n].name,address:t.markers[n].address,tel:s,distance:t.poisData[n].distance})}e.address=o,e.covers=a,uni.hideLoading()},fail:function(t){uni.showToast({title:"获取位置信息失败，请检查是否打开位置权限"}),uni.hideLoading()}})}),0)},bindInput:function(t){var e=t.detail.value;this.getPoiAround(e)},marker:function(e){var i=this,a=i.address[e.markerId||0],o=a.tel?["打电话","到这里"]:["到这里"];uni.showActionSheet({itemList:o,success:function(t){if(0==t.tapIndex&&a.tel)uni.makePhoneCall({phoneNumber:a.tel});else{var e=Number(a.latitude),i=Number(a.longitude);uni.openLocation({name:a.title,address:a.address,latitude:e,longitude:i,scale:18})}},fail:function(e){t("log",e.errMsg," at pages/index/maps/maps.vue:185")}})},call:function(t){var e=Number(t.currentTarget.dataset.id),i=this.address[e].tel;i&&uni.makePhoneCall({phoneNumber:i})},go:function(t){var e=Number(t.currentTarget.dataset.id),i=this.address[e],a=Number(i.latitude),o=Number(i.longitude);uni.openLocation({name:i.title,address:i.address,latitude:a,longitude:o,scale:18})}}};e.default=o}).call(this,i("0de9")["log"])},5358:function(t,e,i){"use strict";var a=i("e91d"),o=i.n(a);o.a},"560f":function(t,e,i){function a(t){this.key=t.key,this.requestConfig={key:t.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"}}i("a15b"),i("acd8"),i("ac1f"),i("1276"),a.prototype.getWxLocation=function(t,e){wx.getLocation({type:"gcj02",success:function(t){var i=t.longitude+","+t.latitude;wx.setStorage({key:"userLocation",data:i}),e(i)},fail:function(i){wx.getStorage({key:"userLocation",success:function(t){t.data&&e(t.data)}}),t.fail({errCode:"0",errMsg:i.errMsg||""})}})},a.prototype.getRegeo=function(t){function e(e){var a=i.requestConfig;wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:i.key,location:e,extensions:"all",s:a.s,platform:a.platform,appname:i.key,sdkversion:a.sdkversion,logversion:a.logversion},method:"GET",header:{"content-type":"application/json"},success:function(i){var a,o,n,s,r,c,l,d,u;i.data.status&&"1"==i.data.status?(a=i.data.regeocode,o=a.addressComponent,n=[],s="",a&&a.roads[0]&&a.roads[0].name&&(s=a.roads[0].name+"附近"),r=e.split(",")[0],c=e.split(",")[1],a.pois&&a.pois[0]&&(s=a.pois[0].name+"附近",l=a.pois[0].location,l&&(r=parseFloat(l.split(",")[0]),c=parseFloat(l.split(",")[1]))),o.provice&&n.push(o.provice),o.city&&n.push(o.city),o.district&&n.push(o.district),o.streetNumber&&o.streetNumber.street&&o.streetNumber.number?(n.push(o.streetNumber.street),n.push(o.streetNumber.number)):(d="",a&&a.roads[0]&&a.roads[0].name&&(d=a.roads[0].name),n.push(d)),n=n.join(""),u=[{iconPath:t.iconPath,width:t.iconWidth,height:t.iconHeight,name:n,desc:s,longitude:r,latitude:c,id:0,regeocodeData:a}],t.success(u)):t.fail({errCode:i.data.infocode,errMsg:i.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var i=this;t.location?e(t.location):i.getWxLocation(t,(function(t){e(t)}))},a.prototype.getWeather=function(t){function e(e){var i="base";t.type&&"forecast"==t.type&&(i="all"),wx.request({url:"https://restapi.amap.com/v3/weather/weatherInfo",data:{key:a.key,city:e,extensions:i,s:o.s,platform:o.platform,appname:a.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(e){function i(t){var e={city:{text:"城市",data:t.city},weather:{text:"天气",data:t.weather},temperature:{text:"温度",data:t.temperature},winddirection:{text:"风向",data:t.winddirection+"风"},windpower:{text:"风力",data:t.windpower+"级"},humidity:{text:"湿度",data:t.humidity+"%"}};return e}var a,o;e.data.status&&"1"==e.data.status?e.data.lives?(a=e.data.lives,a&&a.length>0&&(a=a[0],o=i(a),o["liveData"]=a,t.success(o))):e.data.forecasts&&e.data.forecasts[0]&&t.success({forecast:e.data.forecasts[0]}):t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}function i(i){wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:a.key,location:i,extensions:"all",s:o.s,platform:o.platform,appname:a.key,sdkversion:o.sdkversion,logversion:o.logversion},method:"GET",header:{"content-type":"application/json"},success:function(i){var a,o;i.data.status&&"1"==i.data.status?(o=i.data.regeocode,o.addressComponent?a=o.addressComponent.adcode:o.aois&&o.aois.length>0&&(a=o.aois[0].adcode),e(a)):t.fail({errCode:i.data.infocode,errMsg:i.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var a=this,o=a.requestConfig;t.city?e(t.city):a.getWxLocation(t,(function(t){i(t)}))},a.prototype.getPoiAround=function(t){function e(e){var o={key:i.key,location:e,s:a.s,platform:a.platform,appname:i.key,sdkversion:a.sdkversion,logversion:a.logversion};t.querytypes&&(o["types"]=t.querytypes),t.querykeywords&&(o["keywords"]=t.querykeywords),wx.request({url:"https://restapi.amap.com/v3/place/around",data:o,method:"GET",header:{"content-type":"application/json"},success:function(e){var i,a,o,n;if(e.data.status&&"1"==e.data.status){if(e=e.data,e&&e.pois){for(i=[],a=0;a<e.pois.length;a++)o=0==a?t.iconPathSelected:t.iconPath,i.push({latitude:parseFloat(e.pois[a].location.split(",")[1]),longitude:parseFloat(e.pois[a].location.split(",")[0]),iconPath:o,width:22,height:32,id:a,name:e.pois[a].name,address:e.pois[a].address});n={markers:i,poisData:e.pois},t.success(n)}}else t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var i=this,a=i.requestConfig;t.location?e(t.location):i.getWxLocation(t,(function(t){e(t)}))},a.prototype.getStaticmap=function(t){function e(e){o.push("location="+e),t.zoom&&o.push("zoom="+t.zoom),t.size&&o.push("size="+t.size),t.scale&&o.push("scale="+t.scale),t.markers&&o.push("markers="+t.markers),t.labels&&o.push("labels="+t.labels),t.paths&&o.push("paths="+t.paths),t.traffic&&o.push("traffic="+t.traffic);var i=n+o.join("&");t.success({url:i})}var i,a=this,o=[],n="https://restapi.amap.com/v3/staticmap?";o.push("key="+a.key),i=a.requestConfig,o.push("s="+i.s),o.push("platform="+i.platform),o.push("appname="+i.appname),o.push("sdkversion="+i.sdkversion),o.push("logversion="+i.logversion),t.location?e(t.location):a.getWxLocation(t,(function(t){e(t)}))},a.prototype.getInputtips=function(t){var e=this,i=e.requestConfig,a={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.location&&(a["location"]=t.location),t.keywords&&(a["keywords"]=t.keywords),t.type&&(a["type"]=t.type),t.city&&(a["city"]=t.city),t.citylimit&&(a["citylimit"]=t.citylimit),wx.request({url:"https://restapi.amap.com/v3/assistant/inputtips",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.tips&&t.success({tips:e.data.tips})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},a.prototype.getDrivingRoute=function(t){var e=this,i=e.requestConfig,a={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.origin&&(a["origin"]=t.origin),t.destination&&(a["destination"]=t.destination),t.strategy&&(a["strategy"]=t.strategy),t.waypoints&&(a["waypoints"]=t.waypoints),t.avoidpolygons&&(a["avoidpolygons"]=t.avoidpolygons),t.avoidroad&&(a["avoidroad"]=t.avoidroad),wx.request({url:"https://restapi.amap.com/v3/direction/driving",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths,taxi_cost:e.data.route.taxi_cost||""})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},a.prototype.getWalkingRoute=function(t){var e=this,i=e.requestConfig,a={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.origin&&(a["origin"]=t.origin),t.destination&&(a["destination"]=t.destination),wx.request({url:"https://restapi.amap.com/v3/direction/walking",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},a.prototype.getTransitRoute=function(t){var e=this,i=e.requestConfig,a={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.origin&&(a["origin"]=t.origin),t.destination&&(a["destination"]=t.destination),t.strategy&&(a["strategy"]=t.strategy),t.city&&(a["city"]=t.city),t.cityd&&(a["cityd"]=t.cityd),wx.request({url:"https://restapi.amap.com/v3/direction/transit/integrated",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){if(e&&e.data&&e.data.route){var i=e.data.route;t.success({distance:i.distance||"",taxi_cost:i.taxi_cost||"",transits:i.transits})}},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},a.prototype.getRidingRoute=function(t){var e=this,i=e.requestConfig,a={key:e.key,s:i.s,platform:i.platform,appname:e.key,sdkversion:i.sdkversion,logversion:i.logversion};t.origin&&(a["origin"]=t.origin),t.destination&&(a["destination"]=t.destination),wx.request({url:"https://restapi.amap.com/v4/direction/bicycling",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.data&&t.success({paths:e.data.data.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},t.exports.AMapWX=a},"66de":function(t,e,i){"use strict";i.r(e);var a=i("47d1"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},7765:function(t,e,i){"use strict";var a,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"maps-container"},[i("v-uni-view",{staticClass:"search-bar"},[i("v-uni-view",{staticClass:"search-bar-form"},[i("v-uni-view",{staticClass:"search-bar-box"},[i("v-uni-icon",{staticClass:"icon-search-in-box",attrs:{type:"search",size:16}}),i("v-uni-input",{staticClass:"search-bar-input",attrs:{"confirm-type":"search",placeholder:"请输入您的目的地",value:t.inputVal,focus:t.inputShowed},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.bindInput.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputTyping.apply(void 0,arguments)}}}),t.inputVal?i("v-uni-view",{staticClass:"icon-clear",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearInput.apply(void 0,arguments)}}},[i("v-uni-icon",{attrs:{type:"clear",size:"14"}})],1):t._e()],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.inputShowed,expression:"!inputShowed"}],staticClass:"search-bar-label",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showInput.apply(void 0,arguments)}}},[i("v-uni-icon",{staticClass:"icon-search",attrs:{type:"search",size:16}}),i("v-uni-view",{staticClass:"search-bar-text"},[t._v("请输入您的目的地")])],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.inputShowed,expression:"inputShowed"}],staticClass:"cancel-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideInput.apply(void 0,arguments)}}},[t._v("取消")])],1),i("v-uni-map",{staticClass:"tui-map",attrs:{latitude:t.lat,longitude:t.lng,markers:t.covers,scale:12},on:{markertap:function(e){arguments[0]=e=t.$handleEvent(e),t.marker.apply(void 0,arguments)}}}),i("v-uni-scroll-view",{staticClass:"scrollView",style:{height:t.scrollH+"px"},attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"tui-list"},t._l(t.address,(function(e,a){return i("v-uni-view",{key:a,staticClass:"tui-list-cell",class:[a==t.address.length-1?"tui-cell-last":""]},[i("v-uni-view",{staticClass:" addr-title "},[t._v(t._s(e.title))]),i("v-uni-view",{staticClass:"addr-box "},[i("v-uni-view",{staticClass:"addr-detail "},[i("v-uni-text",{staticClass:"distance"},[t._v(t._s(e.distance)+"m")]),t._v(t._s(e.address))],1),i("v-uni-view",{staticClass:"addr-opera "},[e.tel?i("v-uni-view",{staticClass:"opera-box ",attrs:{"hover-class":"tui-opcity","hover-stay-time":150,"data-id":e.id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.call.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"mini-img",attrs:{src:"/static/images/my/call.png"}}),i("v-uni-view",{staticClass:"text"},[t._v("打电话")])],1):t._e(),i("v-uni-view",{staticClass:"opera-box ",attrs:{"hover-class":"tui-opcity","hover-stay-time":150,"data-id":e.id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.go.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"mini-img",attrs:{src:"/static/images/my/go.png"}}),i("v-uni-view",{staticClass:"text"},[t._v("到这里")])],1)],1)],1)],1)})),1)],1)],1)},n=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}))},d2d3:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'uni-page-body[data-v-b2c13f82]{height:100%}.tui-list[data-v-b2c13f82]{background-color:#fff;position:relative;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding-bottom:env(safe-area-inset-bottom)}.tui-list-cell[data-v-b2c13f82]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.tui-list-cell[data-v-b2c13f82]::after{content:"";position:absolute;border-bottom:%?1?% solid #eaeef1;-webkit-transform:scaleY(.5);transform:scaleY(.5);bottom:0;right:0;left:%?30?%}.tui-cell-last[data-v-b2c13f82]::after{border-bottom:0}.maps-container[data-v-b2c13f82]{width:100%;height:100%;overflow:hidden}.tui-map[data-v-b2c13f82]{width:100%;height:%?600?%;display:block}.scrollView[data-v-b2c13f82]{width:100%;padding-bottom:%?100?%;background-color:#fff}.search-bar[data-v-b2c13f82]{position:relative;padding:8px 10px;display:-webkit-flex;display:-webkit-box;display:flex;box-sizing:border-box;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff}.icon-search[data-v-b2c13f82]{margin-right:8px}.icon-search-in-box[data-v-b2c13f82]{margin-right:%?8?%}.search-bar-form[data-v-b2c13f82]{position:relative;-webkit-box-flex:1;-webkit-flex:auto;flex:auto;border-radius:5px;background-color:#f0f0f0}.search-bar-text[data-v-b2c13f82]{display:inline-block;font-size:14px;vertical-align:middle}.search-bar-box[data-v-b2c13f82]{width:100%;height:30px;padding-left:10px;padding-right:30px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;position:relative;z-index:1}.search-bar-input[data-v-b2c13f82]{font-size:14px;-webkit-box-flex:1;-webkit-flex:1;flex:1}.icon-clear[data-v-b2c13f82]{position:absolute;top:0;right:0;padding:0 8px;font-size:0}.search-bar-label[data-v-b2c13f82]{width:100%;height:100%;position:absolute;left:0;top:0;z-index:2;border-radius:3px;text-align:center;color:#9b9b9b;background:#f0f0f0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.cancel-btn[data-v-b2c13f82]{margin-left:10px;line-height:30px;color:#5982fd;white-space:nowrap;font-size:15px}.tui-list-cell[data-v-b2c13f82]{display:initial;padding:%?30?%}.addr-title[data-v-b2c13f82]{font-size:%?30?%;line-height:%?40?%;color:#000;font-weight:700;width:100%;padding-bottom:%?20?%}.addr-box[data-v-b2c13f82]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.addr-detail[data-v-b2c13f82]{width:%?450?%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;\n\t/* autoprefixer: off */-webkit-box-orient:vertical;\n\t/* autoprefixer: on */font-size:%?24?%;color:#999}.distance[data-v-b2c13f82]{color:#5982fd;padding-right:%?6?%}.addr-opera[data-v-b2c13f82]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.opera-box[data-v-b2c13f82]{text-align:center;margin-left:%?26?%}.mini-img[data-v-b2c13f82]{width:%?44?%;height:%?44?%}.text[data-v-b2c13f82]{color:#333;font-size:%?24?%;line-height:%?30?%}',""]),t.exports=e},e91d:function(t,e,i){var a=i("d2d3");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("02ca9952",a,!0,{sourceMap:!1,shadowMode:!1})}}]);